var a={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",itemClass:"dropdown-item",disabledClass:"disabled",zIndex:"9999",preventCloseOnClick:!1,useLists:!1,listClass:"list-group",listItemClasses:["list-group-item","list-group-item-action"],show:(m,t)=>!0},h=new Set,u=class{i;s;e;t;l;constructor(t,l,s){this.e=l,this.i=t,this.s=null,this.t=Object.assign({},a,s),["contextmenu","long-press"].forEach(e=>{t.addEventListener(e,this)}),["click","touchstart"].forEach(e=>{document.addEventListener(e,this)}),h.add(this)}handleEvent=t=>{let s={"long-press":"contextmenu",touchstart:"click"}[t.type]||t.type;this[`on${s}`](t)};static updateDefaultOptions(t){a=Object.assign(a,t)}static getDefaultOptions(){return a}getItems(){return this.e}setItems(t){this.e=t}n=()=>{let t=this.t.useLists,l=document.createElement("ul");l.style.minWidth="120px",l.style.maxWidth="240px",l.style.display="block",l.classList.add(this.t.contextMenuClass),l.classList.add(...this.t.dropdownClass.split(" ")),t&&l.classList.add(this.t.listClass);for(let s of this.e){let e=document.createElement("li");if(t&&(e.classList.add(...this.t.listItemClasses),s.disabled&&e.classList.add(this.t.disabledClass)),s.classes&&e.classList.add(...s.classes),s==="-"){let i=document.createElement("hr");i.classList.add(this.t.dividerClass),e.appendChild(i)}else{let i=document.createElement("a");s.html?i.innerHTML=s.label:i.innerText=s.label,i.style.cursor="pointer",i.style.whiteSpace="normal",t||(i.classList.add(this.t.itemClass),s.disabled&&i.classList.add(this.t.disabledClass)),e.appendChild(i)}l.appendChild(e)}return l};o=(t,l,s)=>{let e=this.i,i=window.getComputedStyle(s),n=parseInt(i.borderWidth)+1,o=e.getBoundingClientRect(),c=t,p=l;["BODY","HTML"].includes(e.tagName)||(c-=o.left,p-=o.top);let f=parseInt(i.width),C=c+f>e.clientWidth,g=p+s.clientHeight>e.clientHeight,d=t,r=l;return C&&(d=e.clientWidth-f-n,["BODY","HTML"].includes(e.tagName)||(d+=o.left)),g&&(r=e.clientHeight-s.clientHeight-n,["BODY","HTML"].includes(e.tagName)||(r+=o.top)),{normalizedX:d,normalizedY:r}};close=()=>{this.s?.remove(),this.s=null};oncontextmenu=t=>{if(!this.t.show(t,this)||(t.preventDefault(),t.stopPropagation(),h.forEach(c=>{c.close()}),t.target.closest(`.${this.t.contextMenuClass}`)))return;this.l=t,this.close();let s=this.n();document.querySelector("body").append(s),s.style.position="fixed",s.style.zIndex=this.t.zIndex;let e=t.detail.clientX??t.clientX,i=t.detail.clientY??t.clientY,{normalizedX:n,normalizedY:o}=this.o(e,i,s);s.style.top=`${o}px`,s.style.left=`${n}px`,this.s=s};c=t=>!!(t.target.closest(`.${this.t.contextMenuClass}`)==this.s&&this.s);a=t=>{let s=t.target.closest("li");if(s){let e=[...s.parentElement.childNodes].findIndex(n=>n===s),i=this.e[e];i.callback&&(i.callback(this.l,this),(i.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.close())}};onclick=t=>{if(this.c(t)){this.a(t);return}this.close()};off=()=>{h.delete(this),this.close(),["click","touchstart"].forEach(t=>{document.removeEventListener(t,this)}),["contextmenu","long-press"].forEach(t=>{this.i.removeEventListener(t,this)})}},x=u;export{x as default};
//# sourceMappingURL=pure-context-menu.min.js.map
