var a=!1,c={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",itemClass:"dropdown-item",zIndex:"9999",preventCloseOnClick:!1,show:f=>!0},h=class{e;n;t;i;constructor(t,e,n){this.n=e,this.e=t,this.t=Object.assign(c,n),t.addEventListener("contextmenu",this),t.addEventListener("long-press",this),a||(document.addEventListener("click",this),a=!0)}handleEvent(t){let e=t.type==="long-press"?"contextmenu":t.type;this[`on${e}`](t)}static updateDefaultOptions(t){c=Object.assign(c,t)}static getDefaultOptions(){return c}o=()=>{let t=document.createElement("ul");t.style.minWidth="120px",t.style.maxWidth="240px",t.style.display="block",t.classList.add(this.t.contextMenuClass),t.classList.add(this.t.dropdownClass);for(let e of this.n){let n=document.createElement("li");if(e==="-"){let s=document.createElement("hr");s.classList.add(this.t.dividerClass),n.appendChild(s)}else{let s=document.createElement("a");s.innerText=e.label,s.style.cursor="pointer",s.style.whiteSpace="normal",s.classList.add(this.t.itemClass),n.appendChild(s)}t.appendChild(n)}return t};l=(t,e,n)=>{let s=this.e,o=window.getComputedStyle(n),l=parseInt(o.borderWidth)+1,i=s.getBoundingClientRect(),p=t,u=e;["BODY","HTML"].includes(s.tagName)||(p-=i.left,u-=i.top);let m=parseInt(o.width),C=p+m>s.clientWidth,g=u+n.clientHeight>s.clientHeight,d=t,r=e;return C&&(d=s.clientWidth-m-l,["BODY","HTML"].includes(s.tagName)||(d+=i.left)),g&&(r=s.clientHeight-n.clientHeight-l,["BODY","HTML"].includes(s.tagName)||(r+=i.top)),{normalizedX:d,normalizedY:r}};s=()=>{document.querySelector(`.${this.t.contextMenuClass}`)?.remove()};c=t=>{this.n.forEach((e,n)=>{if(e==="-")return;let s=t.children[n];s.ontouchstart=s.onclick=()=>{e.callback(this.i),(e.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.s()}})};oncontextmenu=t=>{if(!this.t.show(t))return;t.preventDefault(),t.stopPropagation(),this.i=t,this.s();let e=this.o();document.querySelector("body").append(e),e.style.position="fixed",e.style.zIndex=this.t.zIndex;let n=t.detail.clientX??t.clientX,s=t.detail.clientY??t.clientY,{normalizedX:o,normalizedY:l}=this.l(n,s,e);e.style.top=`${l}px`,e.style.left=`${o}px`,e.oncontextmenu=i=>i.preventDefault(),this.c(e)};onclick=t=>{t.target.closest(`.${this.t.contextMenuClass}`)||this.s()};off(){this.s(),document.removeEventListener("click",this),a=!1,this.e.removeEventListener("contextmenu",this),this.e.removeEventListener("long-press",this)}},x=h;export{x as default};
//# sourceMappingURL=pure-context-menu.min.js.map
