var d={contextMenuClass:"pure-context-menu",dropdownClass:"dropdown-menu",dividerClass:"dropdown-divider",menuItemClass:"pure-context-menu-item",itemClass:"dropdown-item pure-context-menu-item",disabledClass:["disabled","user-select-none"],zIndex:"9999",preventCloseOnClick:!1,useLists:!1,listClass:"list-group",listItemClass:"list-group-item list-group-item-action",fastClick:!1,closeIfOpen:!1,show:(m,t)=>!0},p=new Set,f=class{i;s;e;t;l;constructor(t,i,e){this.e=i,this.i=t,this.s=null,this.t=Object.assign({},d,e),["contextmenu","long-press","keydown"].forEach(s=>{t.addEventListener(s,this)}),this.n().forEach(s=>{document.addEventListener(s,this)}),p.add(this)}n(){return this.t.fastClick?["click","touchstart"]:["click"]}handleEvent=t=>{let e={"long-press":"contextmenu",touchstart:"click"}[t.type]||t.type;this[`on${e}`](t)};static updateDefaultOptions(t){d=Object.assign(d,t)}static getDefaultOptions(){return d}getItems(){return this.e}setItems(t){this.e=t}o=()=>{let t=this.t.useLists,i=document.createElement("ul");i.style.minWidth="120px",i.style.maxWidth="240px",i.style.display="block",i.classList.add(this.t.contextMenuClass),i.classList.add(...this.t.dropdownClass.split(" ")),t&&i.classList.add(this.t.listClass);for(let e of this.e){let s=document.createElement("li");if(s.classList.add(this.t.menuItemClass),t&&(s.classList.add(...this.t.listItemClass.split(" ")),e.disabled&&s.classList.add(...this.t.disabledClass)),e.classes&&s.classList.add(...e.classes),e==="-"){let l=document.createElement("hr");l.classList.add(this.t.dividerClass),s.appendChild(l)}else{let l=document.createElement("a");e.html?l.innerHTML=e.label:l.innerText=e.label,l.style.cursor="pointer",l.style.whiteSpace="normal",t||(l.classList.add(...this.t.itemClass.split(" ")),e.disabled&&l.classList.add(...this.t.disabledClass)),s.appendChild(l)}i.appendChild(s)}return i};c=(t,i,e)=>{let s=this.i,l=window.getComputedStyle(e),n=parseInt(l.borderWidth)+1,o=s.getBoundingClientRect(),a=t,c=i;["BODY","HTML"].includes(s.tagName)||(a-=o.left,c-=o.top);let r=parseInt(l.width),C=a+r>s.clientWidth,g=c+e.clientHeight>s.clientHeight,h=t,u=i;return C&&(h=s.clientWidth-r-n,["BODY","HTML"].includes(s.tagName)||(h+=o.left)),g&&(u=s.clientHeight-e.clientHeight-n,["BODY","HTML"].includes(s.tagName)||(u+=o.top)),{normalizedX:h,normalizedY:u}};close=()=>this.s?(this.s.remove(),this.s=null,!0):!1;onkeydown(t){switch(t.keyCode||t.key){case 27:case"Escape":this.close();break}}oncontextmenu=t=>{if(!this.t.show(t,this))return;t.preventDefault(),t.stopPropagation();let i=!1;if(p.forEach(c=>{c.close()&&c===this&&(i=!0)}),this.t.closeIfOpen&&i||t.target.closest(`.${this.t.contextMenuClass}`))return;this.l=t,this.close();let s=this.o();document.querySelector("body").append(s),s.style.position="fixed",s.style.zIndex=this.t.zIndex;let l=t.detail.clientX??t.clientX,n=t.detail.clientY??t.clientY,{normalizedX:o,normalizedY:a}=this.c(l,n,s);s.style.top=`${a}px`,s.style.left=`${o}px`,this.s=s};a=t=>!!(t.target.closest(`.${this.t.contextMenuClass}`)==this.s&&this.s);d=t=>{let e=t.target.closest("li");if(e){let s=[...e.parentElement.childNodes].findIndex(n=>n===e),l=this.e[s];l.callback&&!l.disabled&&(l.callback(this.l,this),(l.preventCloseOnClick??this.t.preventCloseOnClick??!1)||this.close())}};onclick=t=>{if(this.a(t)){this.d(t);return}this.close()};off=()=>{p.delete(this),this.close(),this.n().forEach(t=>{document.removeEventListener(t,this)}),["contextmenu","long-press","keydown"].forEach(t=>{this.i.removeEventListener(t,this)})}},x=f;export{x as default};
//# sourceMappingURL=pure-context-menu.min.js.map
